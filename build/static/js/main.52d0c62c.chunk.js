(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a(0),r=a.n(n),s=a(19),o=a.n(s),i=a(6),l=a(67),j=a(9),b=a.n(j),u=a(17),d=a(25),h=(a(74),a(75),a(109)),p=a(105),O=a(102),x=a(108),f=a(103),m=a(12),v=a.n(m),k=(a(93),function(){return Object(c.jsxs)("div",{className:"lds-grid",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})}),y=a(22);var g=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),o=Object(d.a)(s,2),i=o[0],j=o[1],m=Object(n.useState)(!0),g=Object(d.a)(m,2),I=g[0],S=g[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,v.a.get("http://localhost:5001/api/books/");case 3:t=e.sent,S(!1),r(t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var C=function(){var e=Object(u.a)(b.a.mark((function e(t){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,S(!0),!i){e.next=11;break}return e.next=6,v.a.get("http://localhost:5001/api/books/".concat(i));case 6:a=e.sent,r(a.data.book),S(!1),e.next=16;break;case 11:return e.next=13,v.a.get("http://localhost:5001/api/books/");case 13:c=e.sent,r(c.data),S(!1);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),r([]),S(!1);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),e.next=4,v.a.delete("http://localhost:5001/api/books/".concat(t));case 4:r(Object(l.a)(a.filter((function(e){return e._id!==t})))),S(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message),S(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"home",children:[Object(c.jsx)(h.a,{className:"px-3 py-2 my-4",children:Object(c.jsx)(h.a.Body,{children:Object(c.jsx)(p.a,{onSubmit:C,children:Object(c.jsxs)(p.a.Group,{controlId:"exampleForm.ControlInput1",children:[Object(c.jsx)(p.a.Label,{children:"Search by ID"}),Object(c.jsx)(p.a.Control,{type:"text",placeholder:"Please Enter the ID",onChange:function(e){return j(e.target.value)}}),Object(c.jsx)("button",{type:"submit",onClick:C,className:"btn btn-primary my-2",children:"Submit"}),Object(c.jsx)(y.b,{to:"/form",children:Object(c.jsxs)(O.a,{variant:"success",className:"mx-4",children:["Add Book"," "]})})]})})})}),0===a.length?Object(c.jsx)(x.a,{className:"my-3",children:Object(c.jsx)("h1",{className:"text-center",children:"No Books Found"})}):Object(c.jsx)("div",{className:"my-3"}),I?Object(c.jsx)(k,{}):Object(c.jsxs)(f.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"ID"}),Object(c.jsx)("th",{children:"Title"}),Object(c.jsx)("th",{children:"Author"}),Object(c.jsx)("th",{children:"ISBN"}),Object(c.jsx)("th",{children:"Publisher"}),Object(c.jsx)("th",{children:"Publication Year"}),Object(c.jsx)("th",{children:"last modified date"}),Object(c.jsx)("th",{children:"created date"}),Object(c.jsx)("th",{children:"Delete"}),Object(c.jsx)("th",{children:"Edit"})]})}),0===a.length?Object(c.jsx)(c.Fragment,{}):Object(c.jsx)("tbody",{children:a.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e._id}),Object(c.jsx)("td",{children:e.title}),Object(c.jsx)("td",{children:e.author}),Object(c.jsx)("td",{children:e.isbn}),Object(c.jsx)("td",{children:e.publisher}),Object(c.jsx)("td",{children:e.publication_year}),Object(c.jsx)("td",{children:e.last_modified_date}),Object(c.jsx)("td",{children:e.created_date}),Object(c.jsx)("td",{children:Object(c.jsx)(O.a,{variant:"danger",onClick:function(){return w(e._id)},children:"Delete"})}),Object(c.jsx)("td",{children:Object(c.jsx)(y.b,{to:"/form/".concat(e._id),children:Object(c.jsx)(O.a,{variant:"primary",children:"Edit"})})})]},e._id)}))})]})]})},I=a(10),S=a(104),C=function(e){var t=Object(n.useState)({title:"",publisher:"",isbn:"",author:"",publication_year:""}),a=Object(d.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(d.a)(o,2),l=i[0],j=i[1];Object(n.useEffect)((function(){(function(){var t=Object(u.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.match.params.bookId){t.next=7;break}return j(!0),t.next=5,v.a.get("http://localhost:5001/api/books/".concat(e.match.params.bookId));case 5:a=t.sent,s({title:a.data.book[0].title,publisher:a.data.book[0].publisher,isbn:a.data.book[0].isbn,publication_year:a.data.book[0].publication_year,author:a.data.book[0].author});case 7:j(!1),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0.message),j(!1);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}})()()}),[e.match.params.bookId]);var x=function(){var t=Object(u.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!e.match.params.bookId){t.next=16;break}return t.prev=2,j(!0),t.next=6,v.a.put("http://localhost:5001/api/books/".concat(e.match.params.bookId),r,{"Content-Type ":"application/json"});case 6:j(!1),e.history.push("/"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0.message),j(!1);case 14:t.next=27;break;case 16:return t.prev=16,j(!0),t.next=20,v.a.post("http://localhost:5001/api/books/",r,{"Content-Type ":"application/json"});case 20:j(!1),e.history.push("/"),t.next=27;break;case 24:t.prev=24,t.t1=t.catch(16),j(!1);case 27:case"end":return t.stop()}}),t,null,[[2,10],[16,24]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsx)(S.a,{children:l?Object(c.jsx)(k,{}):Object(c.jsx)(h.a,{className:"px-4 py-4",children:Object(c.jsxs)(p.a,{onSubmit:function(e){return x(e)},children:[Object(c.jsxs)(p.a.Group,{children:[Object(c.jsx)(p.a.Label,{children:"Title"}),Object(c.jsx)(p.a.Control,{type:"text",placeholder:"Enter Title",value:r.title,onChange:function(e){return s(Object(I.a)(Object(I.a)({},r),{},{title:e.target.value}))}})]}),Object(c.jsxs)(p.a.Group,{children:[Object(c.jsx)(p.a.Label,{children:"Author"}),Object(c.jsx)(p.a.Control,{type:"text",placeholder:"Enter Author",value:r.author,onChange:function(e){return s(Object(I.a)(Object(I.a)({},r),{},{author:e.target.value}))}})]}),Object(c.jsxs)(p.a.Group,{children:[Object(c.jsx)(p.a.Label,{children:"Publisher"}),Object(c.jsx)(p.a.Control,{type:"text",placeholder:"Enter Publisher",value:r.publisher,onChange:function(e){return s(Object(I.a)(Object(I.a)({},r),{},{publisher:e.target.value}))}})]}),Object(c.jsxs)(p.a.Group,{children:[Object(c.jsx)(p.a.Label,{children:"ISBN"}),Object(c.jsx)(p.a.Control,{type:"text",placeholder:"Enter ISBN",value:r.isbn,onChange:function(e){return s(Object(I.a)(Object(I.a)({},r),{},{isbn:e.target.value}))}})]}),Object(c.jsxs)(p.a.Group,{children:[Object(c.jsx)(p.a.Label,{children:"Publication Year"}),Object(c.jsx)(p.a.Control,{type:"text",placeholder:"Enter Publication Year",value:r.publication_year,onChange:function(e){return s(Object(I.a)(Object(I.a)({},r),{},{publication_year:e.target.value}))}})]}),Object(c.jsx)(O.a,{variant:"primary",type:"submit",children:"Submit"})]})})})},w=a(107),_=a(106),E=a(59),N=a.n(E),B="USER_LOGIN",D="USER_LOGOUT",L=function(){return function(){var e=Object(u.a)(b.a.mark((function e(t){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token")){e.next=3;break}return e.abrupt("return");case 3:return v.a.defaults.headers.common.Authorization="Bearer ".concat(a),c=null,e.prev=5,e.next=8,v.a.get("http://localhost:5001/api/auth/user-info");case 8:c=e.sent,t({type:B,payload:{token:a,userId:c.data.userId,name:c.data.name}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},T=a(24),G=a(66),A=function(){var e=Object(T.b)(),t=Object(T.c)((function(e){return e.userAuth})),a=t.token,n=(t.userId,t.name);return Object(c.jsx)(w.a,{bg:"dark",variant:"dark",children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.b,{to:"/",children:Object(c.jsx)(w.a.Brand,{children:"Books.com"})}),a?Object(c.jsxs)(_.a,{children:[Object(c.jsx)(w.a.Brand,{children:n}),Object(c.jsxs)(O.a,{variant:"primary",onClick:function(){e((function(e){e({type:D})})),localStorage.removeItem("token")},children:[Object(c.jsx)(G.a,{})," Logout"]})]}):Object(c.jsx)(N.a,{appId:"370497804255875",fields:"name,email,picture",callback:function(t){v.a.post("http://localhost:5001/api/auth/facebook-login",{accessToken:t.accessToken,userID:t.userID}).then((function(t){localStorage.setItem("token",t.data.token),e(L())}))}})]})})},P=function(){var e=Object(T.b)();return Object(n.useEffect)((function(){e(L())}),[e]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(A,{}),Object(c.jsx)(S.a,{children:Object(c.jsxs)(i.c,{children:[Object(c.jsx)(i.a,{path:"/",component:g,exact:!0}),Object(c.jsx)(i.a,{path:"/form/:bookId?",component:C})]})})]})},F=a(23),R=a(64),U=a(65),Y={userId:null,name:"",token:null},J=Object(F.combineReducers)({userAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(I.a)(Object(I.a)({},e),{},{userId:t.payload.userId,token:t.payload.token,name:t.payload.name});case D:return{userId:null,token:null,name:""};default:return Object(I.a)({},e)}}}),M=[R.a],z=Object(F.createStore)(J,{},Object(U.composeWithDevTools)(F.applyMiddleware.apply(void 0,M)));o.a.render(Object(c.jsx)(T.a,{store:z,children:Object(c.jsx)(y.a,{children:Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(P,{})})})}),document.getElementById("root"))},74:function(e,t,a){},93:function(e,t,a){}},[[100,1,2]]]);
//# sourceMappingURL=main.52d0c62c.chunk.js.map